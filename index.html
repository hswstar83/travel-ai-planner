<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âœˆï¸ AI ì—¬í–‰ ê³„íš ìƒì„±ê¸°</title>
    <style>
        :root { --primary: #007AFF; --bg: #F2F2F7; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); padding: 20px; display: flex; justify-content: center; }
        .container { max-width: 600px; width: 100%; background: #fff; border-radius: 20px; padding: 25px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        h1 { text-align: center; font-size: 22px; margin-bottom: 5px; }
        .subtitle { text-align: center; color: #888; font-size: 13px; margin-bottom: 25px; }
        input, textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 12px; margin-bottom: 15px; box-sizing: border-box; font-family: inherit; }
        button { width: 100%; padding: 16px; background: var(--primary); color: white; border: none; border-radius: 14px; font-weight: bold; font-size: 16px; cursor: pointer; transition: 0.2s; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        
        /* ê²°ê³¼ í™”ë©´ ìŠ¤íƒ€ì¼ */
        #resultArea { display: none; margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px; }
        #output { white-space: pre-wrap; line-height: 1.6; font-size: 15px; color: #333; background: #f9f9f9; padding: 15px; border-radius: 10px; }
        
        /* ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ */
        .loader { display: none; text-align: center; margin-top: 20px; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid var(--primary); border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div class="container">
    <h1>âœˆï¸ ì›í´ë¦­ ì—¬í–‰ ê³„íší‘œ</h1>
    <p class="subtitle">AIê°€ ë‚ ì”¨, ë™ì„ , ë§›ì§‘ê¹Œì§€ 10ì´ˆ ë§Œì— ì§œë“œë¦½ë‹ˆë‹¤.</p>

    <label>ì—¬í–‰ì§€</label>
    <input type="text" id="destination" placeholder="ì˜ˆ: ë‹¤ë‚­ ë‚˜ë§Œ ë¦¬íŠ¸ë¦¬íŠ¸">

    <label>ë‚ ì§œ & ê¸°ê°„</label>
    <input type="text" id="dates" placeholder="ì˜ˆ: 12ì›” 19ì¼ ~ 23ì¼">

    <label>ì¸ì› êµ¬ì„±</label>
    <input type="text" id="members" placeholder="ì˜ˆ: ë¶€ëª¨ë‹˜, ë¶€ë¶€, 7ì„¸ ì•„ì´">

    <label>íŠ¹ë³„ ìš”ì²­</label>
    <textarea id="special" rows="2" placeholder="ì˜ˆ: ìˆ˜ì˜ì¥ ì˜¨ìˆ˜ ì—¬ë¶€, í‚¤ì¦ˆ ë§ˆì‚¬ì§€ í•„ìˆ˜"></textarea>

    <button id="generateBtn" onclick="generatePlan()">âœ¨ ì—¬í–‰ ê³„íš ìƒì„±í•˜ê¸°</button>
    
    <div class="loader" id="loader">
        <div class="spinner"></div>
        <p>AIê°€ ì—¬í–‰ ê³„íšì„ ì§œê³  ìˆì–´ìš”...<br>(ìµœëŒ€ 30ì´ˆ ì •ë„ ê±¸ë¦½ë‹ˆë‹¤)</p>
    </div>

    <div id="resultArea">
        <h3>ğŸ“ AI ì—¬í–‰ ê³„íší‘œ</h3>
        <div id="output"></div>
    </div>
</div>

<script>
    async function generatePlan() {
        const dest = document.getElementById('destination').value;
        const dates = document.getElementById('dates').value;
        const members = document.getElementById('members').value;
        const special = document.getElementById('special').value;

        if(!dest || !dates) { alert("ì—¬í–‰ì§€ì™€ ë‚ ì§œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!"); return; }

        // ë²„íŠ¼ ë¹„í™œì„±í™” ë° ë¡œë”© í‘œì‹œ
        document.getElementById('generateBtn').disabled = true;
        document.getElementById('loader').style.display = 'block';
        document.getElementById('resultArea').style.display = 'none';

        // í”„ë¡¬í”„íŠ¸ êµ¬ì„± (ì„œë²„ë¡œ ë³´ë‚¼ ë‚´ìš©)
        const prompt = `
ë‹¹ì‹ ì€ ë² íŠ¸ë‚¨ ì „ë¬¸ ì—¬í–‰ ê°€ì´ë“œì…ë‹ˆë‹¤. ì•„ë˜ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í‘œì™€ ë¶ˆë ›í¬ì¸íŠ¸ë¥¼ ì¨ì„œ ê°€ë…ì„± ì¢‹ì€ ì—¬í–‰ ê³„íšì„ ì§œì£¼ì„¸ìš”.

1. ì—¬í–‰ì§€: ${dest}
2. ë‚ ì§œ: ${dates}
3. ì¸ì›: ${members}
4. ìš”ì²­: ${special}

[í•„ìˆ˜ í¬í•¨ ë‚´ìš©]
1. ë‚ ì”¨ ë¶„ì„ ë° ì˜·ì°¨ë¦¼
2. ì•ˆì „ ì´ìŠˆ ë° ë³‘ì› ì •ë³´
3. 3ëŒ€ ê°€ì¡± ë§ì¶¤ 4ë°• 5ì¼ ìƒì„¸ ì¼ì •í‘œ (ë§›ì§‘ êµ¬ê¸€ë§µ ë§í¬ í¬í•¨í•  ê²ƒ)
4. ì˜ˆìƒ ê²½ë¹„ ë° ì¤€ë¹„ë¬¼ ì²´í¬ë¦¬ìŠ¤íŠ¸
5. í˜¸í…” ë¬¸ì˜ ì´ë©”ì¼ ì´ˆì•ˆ (ì˜ì–´)
`;

        try {
            const response = await fetch('/api/generate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ prompt: prompt })
            });

            const data = await response.json();
            
            if (data.error) throw new Error(data.error);

            // ê²°ê³¼ ë³´ì—¬ì£¼ê¸°
            document.getElementById('output').innerHTML = data.result
                .replace(/\n/g, '<br>') // ì¤„ë°”ê¿ˆ ì²˜ë¦¬
                .replace(/\*\*(.*?)\*\*/g, '<b>$1</b>'); // ë³¼ë“œì²´ ì²˜ë¦¬
            
            document.getElementById('resultArea').style.display = 'block';

        } catch (error) {
            alert("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + error.message);
        } finally {
            document.getElementById('generateBtn').disabled = false;
            document.getElementById('loader').style.display = 'none';
        }
    }
</script>

</body>
</html>
